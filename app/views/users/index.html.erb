<% title "Users" %>

<table id="table_users" class="datatable table table-striped table-bordered">
  <thead>
  <tr>
    <th>NetID</th>
    <th>Name</th>
    <th class="no_sort"> </th>
    <th class="no_sort"> </th>
  </tr>
  </thead>
  <tbody>
  <% for user in @users %>
    <% if user.deleted_at %> 
      <tr class="deactivated">
      <% @toggle = "link_to \"Activate\", activate_path(:users,user.id), :class => \"btn btn-success\"" %>
    <% else %>
      <tr class= "activated">
      <% @toggle = "link_to \"Deactivate\", deactivate_path(:users,user), :class => \"btn btn-danger\"" %>
    <% end %>
    <td><%= user.login %></td>
    <td><%= link_to user.name, user %></td>
    <td><%= link_to "Edit", edit_user_path(user), :class => "btn" %></td>
    <td><%= eval @toggle %></td>
    </tr>
  <% end %>
  </tbody>
</table>
<hr />
<p> 
  <%= link_to "New User", new_user_path, :class => "btn btn-primary" %> | 
  <% if params[:show_deleted] %>
    <%= link_to "Hide Deactivated Users from List", users_path, :class => "btn" %>
  <% else %>
    <%= link_to "Show Deactivated Users in List", users_path(:show_deleted => true), :class => "btn" %>
  <% end %>
</p>
