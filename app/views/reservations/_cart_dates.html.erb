<div id="cart_dates">
  <%= form_tag update_cart_path, :remote => true, :class => "form-vertical" do %>
    <%= label_tag :reserver_id, 'Reserver' %>
    <%# application.js needs to know the update path %>
    <%= hidden_field_tag 'update_cart_path', update_cart_path %>
    <% if current_user && (current_user.is_admin_in_adminmode? || current_user.is_admin_in_checkoutpersonmode? || current_user.is_checkout_person?) %>
      <%= autocomplete_field_tag 'fake_reserver_id', User.find(cart.reserver_id).render_name, autocomplete_user_last_name_reservations_path, :size => 30, :update_elements => {:id => '#reserver_id'}, :class => 'submittable input-medium' %>
      <%= hidden_field_tag 'reserver_id', cart.reserver_id %>
    <% elsif !current_user %>
        Please sign in <br />
    <% else %>
    <div class="cart_reserver">
      <%= link_to cart.reserver.name, user_path(cart.reserver) %>
      <%= hidden_field_tag 'reserver_id', cart.reserver.id  %>
    </div>
    <% end %>

      <%= label_tag :start_date, 'Start of reservation' %>
      <%= datepicker_input "cart", "start_date_cart", :class => 'submittable', :class => 'submitchange input-medium', :value => cart.start_date.strftime('%m/%d/%Y') %>
      
      <%= label_tag :due_date, 'End of reservation' %>
      <%= datepicker_input "cart", "due_date_cart", :class => 'submitchange input-medium', :value => cart.due_date.strftime('%m/%d/%Y'), :minDate => cart.start_date.strftime('%m/%d/%Y') %>
  <% end %>
</div>
